<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE AllowAmbiguousTypes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-4"></span><span>
</span><span id="line-5"></span><span class="annot"><span class="hs-comment">-- | Provides functions for creating 'Env' from CLI/Toml configuration.</span></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Shrun.Configuration.Env</span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Running with Env</span></span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Shrun.Configuration.Env.html#withEnv"><span class="hs-identifier">withEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Shrun.Configuration.Env.html#makeEnvAndShrun"><span class="hs-identifier">makeEnvAndShrun</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Misc</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Shrun.Configuration.Env.html#getMergedConfig"><span class="hs-identifier">getMergedConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">where</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Sequence</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Seq</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.Utils.html"><span class="hs-identifier">Effects.FileSystem.Utils</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FsUtils</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.html"><span class="hs-identifier">Shrun</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.ShellT.html#runShellT"><span class="hs-identifier">runShellT</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shrun.html#shrun"><span class="hs-identifier">shrun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.html"><span class="hs-identifier">Shrun.Configuration</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.html#mergeConfig"><span class="hs-identifier">mergeConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.Args.Parsing.html"><span class="hs-identifier">Shrun.Configuration.Args.Parsing</span></a></span><span>
</span><span id="line-22"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shrun.Configuration.Args.Parsing.html#parserInfoArgs"><span class="hs-identifier">parserInfoArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.Core.html"><span class="hs-identifier">Shrun.Configuration.Data.Core</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">CoreConfig</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.MergedConfig.html"><span class="hs-identifier">Shrun.Configuration.Data.MergedConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Data.MergedConfig.html#MergedConfig"><span class="hs-identifier">MergedConfig</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html"><span class="hs-identifier">Shrun.Configuration.Data.WithDisabled</span></a></span><span>
</span><span id="line-27"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html#WithDisabled"><span class="hs-identifier">WithDisabled</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html#Disabled"><span class="hs-identifier">Disabled</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html#With"><span class="hs-identifier">With</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html#Without"><span class="hs-identifier">Without</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html"><span class="hs-identifier">Shrun.Configuration.Env.Types</span></a></span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#Env"><span class="hs-identifier">Env</span></a></span><span>
</span><span id="line-31"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#MkEnv"><span class="hs-identifier">MkEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>        </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#anyError"><span class="hs-identifier">anyError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>        </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#commands"><span class="hs-identifier">commands</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>        </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#completedCommands"><span class="hs-identifier">completedCommands</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>        </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#config"><span class="hs-identifier">config</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>        </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#consoleLogQueue"><span class="hs-identifier">consoleLogQueue</span></a></span><span>
</span><span id="line-37"></span><span>      </span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#HasConsoleLogging"><span class="hs-identifier">HasConsoleLogging</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Logging.MonadRegionLogger.html"><span class="hs-identifier">Shrun.Logging.MonadRegionLogger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Logging.MonadRegionLogger.html#MonadRegionLogger"><span class="hs-identifier">MonadRegionLogger</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Logging.MonadRegionLogger.html#Region"><span class="hs-identifier">Region</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Notify.MonadAppleScript.html"><span class="hs-identifier">Shrun.Notify.MonadAppleScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Notify.MonadAppleScript.html#MonadAppleScript"><span class="hs-identifier">MonadAppleScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Notify.MonadDBus.html"><span class="hs-identifier">Shrun.Notify.MonadDBus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Notify.MonadDBus.html#MonadDBus"><span class="hs-identifier">MonadDBus</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Notify.MonadNotifySend.html"><span class="hs-identifier">Shrun.Notify.MonadNotifySend</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Notify.MonadNotifySend.html#MonadNotifySend"><span class="hs-identifier">MonadNotifySend</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.Prelude.html"><span class="hs-identifier">Shrun.Prelude</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Shrun.ShellT.html"><span class="hs-identifier">Shrun.ShellT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.ShellT.html#ShellT"><span class="hs-identifier">ShellT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- | 'withEnv' with 'shrun'.</span></span><span>
</span><span id="line-48"></span><span class="annot"><a href="Shrun.Configuration.Env.html#makeEnvAndShrun"><span class="hs-identifier hs-type">makeEnvAndShrun</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-49"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679537246"><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679537244"><span class="annot"><a href="#local-6989586621679537244"><span class="hs-identifier hs-type">r</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#HasConsoleLogging"><span class="hs-identifier hs-type">HasConsoleLogging</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537244"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Logging.MonadRegionLogger.html#Region"><span class="hs-identifier hs-type">Region</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.ShellT.html#ShellT"><span class="hs-identifier hs-type">ShellT</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537244"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadAppleScript.html#MonadAppleScript"><span class="hs-identifier hs-type">MonadAppleScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-async-0.1-39e959da60364930df1cb8c5cdf8238254801f4be9be7564365a2ec2c38d5ab0/share/doc/html/src/Effects.Concurrent.Async.html#MonadAsync"><span class="hs-identifier hs-type">MonadAsync</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadDBus.html#MonadDBus"><span class="hs-identifier hs-type">MonadDBus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileReader.html#MonadFileReader"><span class="hs-identifier hs-type">MonadFileReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileWriter.html#MonadFileWriter"><span class="hs-identifier hs-type">MonadFileWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.HandleReader.html#MonadHandleReader"><span class="hs-identifier hs-type">MonadHandleReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.HandleWriter.html#MonadHandleWriter"><span class="hs-identifier hs-type">MonadHandleWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-ioref-0.1-860d8f404f53dca6781ee08a504921b2a5ad366cec6f6ee0bf36a6df9af5a101/share/doc/html/src/Effects.IORef.html#MonadIORef"><span class="hs-identifier hs-type">MonadIORef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadNotifySend.html#MonadNotifySend"><span class="hs-identifier hs-type">MonadNotifySend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-optparse-0.1-2e7240a378c60241d5e124a3082e245065eaa3a2a99954e3a03f8467226b64c6/share/doc/html/src/Effects.Optparse.html#MonadOptparse"><span class="hs-identifier hs-type">MonadOptparse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#MonadPathReader"><span class="hs-identifier hs-type">MonadPathReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathWriter.html#MonadPathWriter"><span class="hs-identifier hs-type">MonadPathWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-typed-process-0.1-31e678bb34cc115b0fb9f823b4d3adb6e0d62694ea4adcda5e17b43bcf3a790e/share/doc/html/src/Effects.Process.Typed.html#MonadTypedProcess"><span class="hs-identifier hs-type">MonadTypedProcess</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadMask</span></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Shrun.Logging.MonadRegionLogger.html#MonadRegionLogger"><span class="hs-identifier hs-type">MonadRegionLogger</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-terminal-0.1-79544aab75b25eb7e1d478beef2547ed7103c3686224eb8fd6cfb2d96a5998f8/share/doc/html/src/Effects.System.Terminal.html#MonadTerminal"><span class="hs-identifier hs-type">MonadTerminal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-thread-0.1-11ce15cb9eb5648ab1cfa155131e7e96f8382aa643017eb72fc799e6059083e1/share/doc/html/src/Effects.Concurrent.Thread.html#MonadThread"><span class="hs-identifier hs-type">MonadThread</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-time-0.1-2d36b70ff2ff08d46ea800f2a01319f93564f934493130e6fdcee8591d088979/share/doc/html/src/Effects.Time.html#MonadTime"><span class="hs-identifier hs-type">MonadTime</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-71"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span id="makeEnvAndShrun"><span class="annot"><span class="annottext">makeEnvAndShrun :: forall (m :: Type -&gt; Type) r.
(HasCallStack,
 HasConsoleLogging (Env r) (Region (ShellT (Env r) m)),
 MonadAppleScript m, MonadAsync m, MonadDBus m, MonadFileReader m,
 MonadFileWriter m, MonadHandleReader m, MonadHandleWriter m,
 MonadIORef m, MonadNotifySend m, MonadOptparse m,
 MonadPathReader m, MonadPathWriter m, MonadTypedProcess m,
 MonadMask m, MonadSTM m, MonadRegionLogger m, MonadTerminal m,
 MonadThread m, MonadTime m) =&gt;
m ()
</span><a href="Shrun.Configuration.Env.html#makeEnvAndShrun"><span class="hs-identifier hs-var hs-var">makeEnvAndShrun</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: Type -&gt; Type) r a.
(HasCallStack, MonadDBus m, MonadFileReader m, MonadFileWriter m,
 MonadHandleWriter m, MonadOptparse m, MonadPathReader m,
 MonadPathWriter m, MonadSTM m, MonadThrow m, MonadTerminal m) =&gt;
(Env r -&gt; m a) -&gt; m a
</span><a href="Shrun.Configuration.Env.html#withEnv"><span class="hs-identifier hs-var">withEnv</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679537246"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679537244"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShellT (Env r) m () -&gt; Env r -&gt; m ()
forall (m :: Type -&gt; Type) env a. ShellT env m a -&gt; env -&gt; m a
</span><a href="Shrun.ShellT.html#runShellT"><span class="hs-identifier hs-var">runShellT</span></a></span><span> </span><span class="annot"><span class="annottext">ShellT (Env r) m ()
forall (m :: Type -&gt; Type) env.
(HasAnyError env, HasCallStack, HasCommands env, HasInit env,
 HasCommandLogging env, HasCommonLogging env,
 HasConsoleLogging env (Region m), HasFileLogging env,
 HasNotifyConfig env, HasTimeout env, MonadAsync m,
 MonadHandleReader m, MonadHandleWriter m, MonadIORef m,
 MonadNotify m, MonadTypedProcess m, MonadMask m, MonadReader env m,
 MonadRegionLogger m, MonadSTM m, MonadThread m, MonadTime m) =&gt;
m ()
</span><a href="Shrun.html#shrun"><span class="hs-identifier hs-var">shrun</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-74"></span><span>
</span><span id="line-75"></span><span class="hs-comment">-- | Creates an 'Env' from CLI args and TOML config to run with a monadic</span><span>
</span><span id="line-76"></span><span class="hs-comment">-- action.</span><span>
</span><span id="line-77"></span><span class="annot"><a href="Shrun.Configuration.Env.html#withEnv"><span class="hs-identifier hs-type">withEnv</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679537318"><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621679537319"><span class="annot"><a href="#local-6989586621679537319"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621679537320"><span class="annot"><a href="#local-6989586621679537320"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadDBus.html#MonadDBus"><span class="hs-identifier hs-type">MonadDBus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileReader.html#MonadFileReader"><span class="hs-identifier hs-type">MonadFileReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileWriter.html#MonadFileWriter"><span class="hs-identifier hs-type">MonadFileWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.HandleWriter.html#MonadHandleWriter"><span class="hs-identifier hs-type">MonadHandleWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-optparse-0.1-2e7240a378c60241d5e124a3082e245065eaa3a2a99954e3a03f8467226b64c6/share/doc/html/src/Effects.Optparse.html#MonadOptparse"><span class="hs-identifier hs-type">MonadOptparse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#MonadPathReader"><span class="hs-identifier hs-type">MonadPathReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathWriter.html#MonadPathWriter"><span class="hs-identifier hs-type">MonadPathWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-terminal-0.1-79544aab75b25eb7e1d478beef2547ed7103c3686224eb8fd6cfb2d96a5998f8/share/doc/html/src/Effects.System.Terminal.html#MonadTerminal"><span class="hs-identifier hs-type">MonadTerminal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-90"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-91"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537319"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537320"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-92"></span><span>  </span><span class="annot"><a href="#local-6989586621679537318"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537320"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-93"></span><span id="withEnv"><span class="annot"><span class="annottext">withEnv :: forall (m :: Type -&gt; Type) r a.
(HasCallStack, MonadDBus m, MonadFileReader m, MonadFileWriter m,
 MonadHandleWriter m, MonadOptparse m, MonadPathReader m,
 MonadPathWriter m, MonadSTM m, MonadThrow m, MonadTerminal m) =&gt;
(Env r -&gt; m a) -&gt; m a
</span><a href="Shrun.Configuration.Env.html#withEnv"><span class="hs-identifier hs-var hs-var">withEnv</span></a></span></span><span> </span><span id="local-6989586621679537562"><span class="annot"><span class="annottext">Env r -&gt; m a
</span><a href="#local-6989586621679537562"><span class="hs-identifier hs-var">onEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m MergedConfig
forall (m :: Type -&gt; Type).
(HasCallStack, MonadDBus m, MonadFileReader m, MonadOptparse m,
 MonadPathReader m, MonadThrow m, MonadTerminal m) =&gt;
m MergedConfig
</span><a href="Shrun.Configuration.Env.html#getMergedConfig"><span class="hs-identifier hs-var">getMergedConfig</span></a></span><span> </span><span class="annot"><span class="annottext">m MergedConfig -&gt; (MergedConfig -&gt; m a) -&gt; m a
forall a b. m a -&gt; (a -&gt; m b) -&gt; m b
forall (m :: Type -&gt; Type) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="annot"><span class="annottext">(MergedConfig -&gt; (Env r -&gt; m a) -&gt; m a)
-&gt; (Env r -&gt; m a) -&gt; MergedConfig -&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">MergedConfig -&gt; (Env r -&gt; m a) -&gt; m a
forall (m :: Type -&gt; Type) r a.
(HasCallStack, MonadDBus m, MonadFileWriter m, MonadHandleWriter m,
 MonadPathReader m, MonadPathWriter m, MonadSTM m, MonadTerminal m,
 MonadThrow m) =&gt;
MergedConfig -&gt; (Env r -&gt; m a) -&gt; m a
</span><a href="Shrun.Configuration.Env.html#fromMergedConfig"><span class="hs-identifier hs-var">fromMergedConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Env r -&gt; m a
</span><a href="#local-6989586621679537562"><span class="hs-identifier hs-var">onEnv</span></a></span><span>
</span><span id="line-94"></span><span>
</span><span id="line-95"></span><span class="annot"><span class="hs-comment">-- | Creates a 'MergedConfig' from CLI args and TOML config.</span></span><span>
</span><span id="line-96"></span><span id="local-6989586621679537331"><span class="annot"><a href="Shrun.Configuration.Env.html#getMergedConfig"><span class="hs-identifier hs-type">getMergedConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-97"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadDBus.html#MonadDBus"><span class="hs-identifier hs-type">MonadDBus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileReader.html#MonadFileReader"><span class="hs-identifier hs-type">MonadFileReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-optparse-0.1-2e7240a378c60241d5e124a3082e245065eaa3a2a99954e3a03f8467226b64c6/share/doc/html/src/Effects.Optparse.html#MonadOptparse"><span class="hs-identifier hs-type">MonadOptparse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#MonadPathReader"><span class="hs-identifier hs-type">MonadPathReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-terminal-0.1-79544aab75b25eb7e1d478beef2547ed7103c3686224eb8fd6cfb2d96a5998f8/share/doc/html/src/Effects.System.Terminal.html#MonadTerminal"><span class="hs-identifier hs-type">MonadTerminal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-105"></span><span>  </span><span class="annot"><a href="#local-6989586621679537331"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Shrun.Configuration.Data.MergedConfig.html#MergedConfig"><span class="hs-identifier hs-type">MergedConfig</span></a></span></span><span>
</span><span id="line-106"></span><span id="getMergedConfig"><span class="annot"><span class="annottext">getMergedConfig :: forall (m :: Type -&gt; Type).
(HasCallStack, MonadDBus m, MonadFileReader m, MonadOptparse m,
 MonadPathReader m, MonadThrow m, MonadTerminal m) =&gt;
m MergedConfig
</span><a href="Shrun.Configuration.Env.html#getMergedConfig"><span class="hs-identifier hs-var hs-var">getMergedConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621679537634"><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621679537634"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ParserInfo Args -&gt; m Args
forall a. HasCallStack =&gt; ParserInfo a -&gt; m a
forall (m :: Type -&gt; Type) a.
(MonadOptparse m, HasCallStack) =&gt;
ParserInfo a -&gt; m a
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-optparse-0.1-2e7240a378c60241d5e124a3082e245065eaa3a2a99954e3a03f8467226b64c6/share/doc/html/src/Effects.Optparse.html#execParser"><span class="hs-identifier hs-var">execParser</span></a></span><span> </span><span class="annot"><span class="annottext">ParserInfo Args
</span><a href="Shrun.Configuration.Args.Parsing.html#parserInfoArgs"><span class="hs-identifier hs-var">parserInfoArgs</span></a></span><span>
</span><span id="line-108"></span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621679537636"><span class="annot"><span class="annottext">Maybe Toml
</span><a href="#local-6989586621679537636"><span class="hs-identifier hs-var">mTomlConfig</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621679537634"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Args
-&gt; Optic' A_Lens NoIx Args (WithDisabled OsPath)
-&gt; WithDisabled OsPath
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="file:///nix/store/kpg5cmxmxp7aaby0kpg2q9k29pn7k6ng-optics-core-0.4.1.1-doc/share/doc/optics-core-0.4.1.1/html/src/Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx Args (WithDisabled OsPath)
</span><span class="">#configPath</span></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-111"></span><span>      </span><span class="hs-comment">-- 1. If noConfig is true then we ignore all toml config</span><span>
</span><span id="line-112"></span><span>      </span><span class="annot"><span class="annottext">WithDisabled OsPath
</span><a href="Shrun.Configuration.Data.WithDisabled.html#Disabled"><span class="hs-identifier hs-var">Disabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Toml -&gt; m (Maybe Toml)
forall a. a -&gt; m a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe Toml
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-113"></span><span>      </span><span class="hs-comment">-- 2. noConfig is false and toml config not set: try reading from</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-comment">--    default location. If it does not exist that's fine, just print</span><span>
</span><span id="line-115"></span><span>      </span><span class="hs-comment">--    a message. If it does, try to read it and throw any errors</span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-comment">--    (e.g. file errors, toml errors).</span><span>
</span><span id="line-117"></span><span>      </span><span class="annot"><span class="annottext">WithDisabled OsPath
</span><a href="Shrun.Configuration.Data.WithDisabled.html#Without"><span class="hs-identifier hs-var">Without</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-118"></span><span>        </span><span id="local-6989586621679537638"><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537638"><span class="hs-identifier hs-var">configDir</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m OsPath
forall (m :: Type -&gt; Type).
(HasCallStack, MonadPathReader m) =&gt;
m OsPath
</span><a href="Shrun.Configuration.Env.html#getShrunXdgConfig"><span class="hs-identifier hs-var">getShrunXdgConfig</span></a></span><span>
</span><span id="line-119"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679537640"><span class="annot"><span class="annottext">path :: OsPath
</span><a href="#local-6989586621679537640"><span class="hs-identifier hs-var hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537638"><span class="hs-identifier hs-var">configDir</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; OsPath -&gt; OsPath
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="">[osp|config.toml|]</span></span><span>
</span><span id="line-120"></span><span>        </span><span id="local-6989586621679537646"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679537646"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; m Bool
forall (m :: Type -&gt; Type).
(MonadPathReader m, HasCallStack) =&gt;
OsPath -&gt; m Bool
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#doesFileExist"><span class="hs-identifier hs-var">doesFileExist</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537640"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-121"></span><span>        </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679537646"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-122"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Toml -&gt; Maybe Toml
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Toml -&gt; Maybe Toml) -&gt; m Toml -&gt; m (Maybe Toml)
forall (f :: Type -&gt; Type) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; m Toml
forall {m :: Type -&gt; Type} {b}.
(MonadFileReader m, MonadThrow m, DecodeTOML b) =&gt;
OsPath -&gt; m b
</span><a href="#local-6989586621679537649"><span class="hs-identifier hs-var">readConfig</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537640"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-123"></span><span>          </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-124"></span><span>            </span><span class="annot"><span class="annottext">Text -&gt; m ()
forall (m :: Type -&gt; Type).
(HasCallStack, MonadTerminal m) =&gt;
Text -&gt; m ()
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-terminal-0.1-79544aab75b25eb7e1d478beef2547ed7103c3686224eb8fd6cfb2d96a5998f8/share/doc/html/src/Effects.System.Terminal.html#putTextLn"><span class="hs-identifier hs-var">putTextLn</span></a></span><span>
</span><span id="line-125"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;No default config found at: &quot;</span></span><span>
</span><span id="line-126"></span><span>                  </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OsPath -&gt; String
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.Utils.html#decodeOsToFpShow"><span class="hs-identifier hs-var">FsUtils.decodeOsToFpShow</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537640"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-128"></span><span>            </span><span class="hs-identifier">pure</span><span> </span><span class="annot"><span class="annottext">Maybe Toml
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-comment">-- 3. noConfig is false and toml config explicitly set: try reading</span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-comment">--    (all errors rethrown)</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><a href="Shrun.Configuration.Data.WithDisabled.html#With"><span class="hs-identifier hs-type">With</span></a></span><span> </span><span id="local-6989586621679537653"><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537653"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; m (Maybe Toml)
forall {m :: Type -&gt; Type} {b}.
(MonadFileReader m, MonadThrow m, DecodeTOML b) =&gt;
OsPath -&gt; m b
</span><a href="#local-6989586621679537649"><span class="hs-identifier hs-var">readConfig</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537653"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span>  </span><span class="annot"><span class="annottext">Args -&gt; Maybe Toml -&gt; m MergedConfig
forall (m :: Type -&gt; Type).
(HasCallStack, MonadTerminal m, MonadThrow m) =&gt;
Args -&gt; Maybe Toml -&gt; m MergedConfig
</span><a href="Shrun.Configuration.html#mergeConfig"><span class="hs-identifier hs-var">mergeConfig</span></a></span><span> </span><span class="annot"><span class="annottext">Args
</span><a href="#local-6989586621679537634"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Toml
</span><a href="#local-6989586621679537636"><span class="hs-identifier hs-var">mTomlConfig</span></a></span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-135"></span><span>    </span><span id="local-6989586621679537649"><span class="annot"><span class="annottext">readConfig :: OsPath -&gt; m b
</span><a href="#local-6989586621679537649"><span class="hs-identifier hs-var hs-var">readConfig</span></a></span></span><span> </span><span id="local-6989586621679537682"><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537682"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-136"></span><span>      </span><span id="local-6989586621679537683"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679537683"><span class="hs-identifier hs-var">contents</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; m Text
forall (m :: Type -&gt; Type).
(HasCallStack, MonadFileReader m, MonadThrow m) =&gt;
OsPath -&gt; m Text
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileReader.html#readFileUtf8ThrowM"><span class="hs-identifier hs-var">readFileUtf8ThrowM</span></a></span><span> </span><span class="annot"><span class="annottext">OsPath
</span><a href="#local-6989586621679537682"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-137"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Either TOMLError b
forall a. DecodeTOML a =&gt; Text -&gt; Either TOMLError a
</span><a href="file:///nix/store/k71nnijl13rj1wlph83afyvi08491vq8-toml-reader-0.2.1.0-doc/share/doc/toml-reader-0.2.1.0/html/src/TOML.Decode.html#decode"><span class="hs-identifier hs-var">decode</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621679537683"><span class="hs-identifier hs-var">contents</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-138"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679537686"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679537686"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; m b
forall a. a -&gt; m a
forall (f :: Type -&gt; Type) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679537686"><span class="hs-identifier hs-var">cfg</span></a></span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621679537687"><span class="annot"><span class="annottext">TOMLError
</span><a href="#local-6989586621679537687"><span class="hs-identifier hs-var">tomlErr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TOMLError -&gt; m b
forall (m :: Type -&gt; Type) e a.
(HasCallStack, MonadThrow m, Exception e) =&gt;
e -&gt; m a
</span><a href="file:///nix/store/l0072641y03v7wfrca9v1lv596fpxxa7-safe-exceptions-0.1.7.4-doc/share/doc/safe-exceptions-0.1.7.4/html/src/Control.Exception.Safe.html#throwM"><span class="hs-identifier hs-var">throwM</span></a></span><span> </span><span class="annot"><span class="annottext">TOMLError
</span><a href="#local-6989586621679537687"><span class="hs-identifier hs-var">tomlErr</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span id="local-6989586621679537338"><span id="local-6989586621679537339"><span id="local-6989586621679537340"><span class="annot"><a href="Shrun.Configuration.Env.html#fromMergedConfig"><span class="hs-identifier hs-type">fromMergedConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-142"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span>
</span><span id="line-143"></span><span>    </span><span class="annot"><a href="Shrun.Notify.MonadDBus.html#MonadDBus"><span class="hs-identifier hs-type">MonadDBus</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.FileWriter.html#MonadFileWriter"><span class="hs-identifier hs-type">MonadFileWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.HandleWriter.html#MonadHandleWriter"><span class="hs-identifier hs-type">MonadHandleWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#MonadPathReader"><span class="hs-identifier hs-type">MonadPathReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathWriter.html#MonadPathWriter"><span class="hs-identifier hs-type">MonadPathWriter</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#MonadSTM"><span class="hs-identifier hs-type">MonadSTM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>    </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-terminal-0.1-79544aab75b25eb7e1d478beef2547ed7103c3686224eb8fd6cfb2d96a5998f8/share/doc/html/src/Effects.System.Terminal.html#MonadTerminal"><span class="hs-identifier hs-type">MonadTerminal</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadThrow</span></span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><a href="Shrun.Configuration.Data.MergedConfig.html#MergedConfig"><span class="hs-identifier hs-type">MergedConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-153"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#Env"><span class="hs-identifier hs-type">Env</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537339"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537340"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="#local-6989586621679537338"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537340"><span class="hs-identifier hs-type">a</span></a></span></span></span></span><span>
</span><span id="line-155"></span><span id="fromMergedConfig"><span class="annot"><span class="annottext">fromMergedConfig :: forall (m :: Type -&gt; Type) r a.
(HasCallStack, MonadDBus m, MonadFileWriter m, MonadHandleWriter m,
 MonadPathReader m, MonadPathWriter m, MonadSTM m, MonadTerminal m,
 MonadThrow m) =&gt;
MergedConfig -&gt; (Env r -&gt; m a) -&gt; m a
</span><a href="Shrun.Configuration.Env.html#fromMergedConfig"><span class="hs-identifier hs-var hs-var">fromMergedConfig</span></a></span></span><span> </span><span id="local-6989586621679537742"><span class="annot"><span class="annottext">MergedConfig
</span><a href="#local-6989586621679537742"><span class="hs-identifier hs-var">cfg</span></a></span></span><span> </span><span id="local-6989586621679537743"><span class="annot"><span class="annottext">Env r -&gt; m a
</span><a href="#local-6989586621679537743"><span class="hs-identifier hs-var">onEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>  </span><span id="local-6989586621679537744"><span class="annot"><span class="annottext">TVar (Seq CommandP1)
</span><a href="#local-6989586621679537744"><span class="hs-identifier hs-var">completedCommands</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Seq CommandP1 -&gt; m (TVar (Seq CommandP1))
forall (m :: Type -&gt; Type) a.
(HasCallStack, MonadSTM m) =&gt;
a -&gt; m (TVar a)
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#newTVarA"><span class="hs-identifier hs-var">newTVarA</span></a></span><span> </span><span class="annot"><span class="annottext">Seq CommandP1
forall a. Seq a
</span><span class="hs-identifier hs-var">Seq.empty</span></span><span>
</span><span id="line-157"></span><span>  </span><span id="local-6989586621679537747"><span class="annot"><span class="annottext">TVar Bool
</span><a href="#local-6989586621679537747"><span class="hs-identifier hs-var">anyError</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; m (TVar Bool)
forall (m :: Type -&gt; Type) a.
(HasCallStack, MonadSTM m) =&gt;
a -&gt; m (TVar a)
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#newTVarA"><span class="hs-identifier hs-var">newTVarA</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-158"></span><span>  </span><span id="local-6989586621679537748"><span class="annot"><span class="annottext">TBQueue (LogRegion r)
</span><a href="#local-6989586621679537748"><span class="hs-identifier hs-var">consoleLogQueue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Natural -&gt; m (TBQueue (LogRegion r))
forall (m :: Type -&gt; Type) a.
(HasCallStack, MonadSTM m) =&gt;
Natural -&gt; m (TBQueue a)
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-stm-0.1-7ff2212c4013d17bdc0ec4628b5f9a2b075bd6564a712d7c604a27b5eb873089/share/doc/html/src/Effects.Concurrent.STM.html#newTBQueueA"><span class="hs-identifier hs-var">newTBQueueA</span></a></span><span> </span><span class="annot"><span class="annottext">Natural
</span><span class="hs-number">1_000</span></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span>  </span><span class="annot"><span class="annottext">CoreConfigMerged -&gt; (CoreConfigEnv -&gt; m a) -&gt; m a
forall (m :: Type -&gt; Type) a.
(HasCallStack, MonadDBus m, MonadFileWriter m, MonadHandleWriter m,
 MonadPathReader m, MonadPathWriter m, MonadSTM m, MonadTerminal m,
 MonadThrow m) =&gt;
CoreConfigMerged -&gt; (CoreConfigEnv -&gt; m a) -&gt; m a
</span><a href="Shrun.Configuration.Data.Core.html#withCoreEnv"><span class="hs-identifier hs-var">CoreConfig.withCoreEnv</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MergedConfig
</span><a href="#local-6989586621679537742"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">MergedConfig
-&gt; Optic' A_Lens NoIx MergedConfig CoreConfigMerged
-&gt; CoreConfigMerged
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="file:///nix/store/kpg5cmxmxp7aaby0kpg2q9k29pn7k6ng-optics-core-0.4.1.1-doc/share/doc/optics-core-0.4.1.1/html/src/Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx MergedConfig CoreConfigMerged
</span><span class="">#coreConfig</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((CoreConfigEnv -&gt; m a) -&gt; m a) -&gt; (CoreConfigEnv -&gt; m a) -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679537751"><span class="annot"><span class="annottext">CoreConfigEnv
</span><a href="#local-6989586621679537751"><span class="hs-identifier hs-var">coreConfigEnv</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-161"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679537752"><span class="annot"><span class="annottext">env :: Env r
</span><a href="#local-6989586621679537752"><span class="hs-identifier hs-var hs-var">env</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-162"></span><span>          </span><span class="annot"><a href="Shrun.Configuration.Env.Types.html#MkEnv"><span class="hs-identifier hs-type">MkEnv</span></a></span><span>
</span><span id="line-163"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">config :: CoreConfigEnv
</span><a href="Shrun.Configuration.Env.Types.html#config"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CoreConfigEnv
</span><a href="#local-6989586621679537751"><span class="hs-identifier hs-var">coreConfigEnv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-164"></span><span>              </span><span class="annot"><span class="annottext">TVar Bool
anyError :: TVar Bool
anyError :: TVar Bool
</span><a href="Shrun.Configuration.Env.Types.html#anyError"><span class="hs-identifier hs-var hs-var">anyError</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-165"></span><span>              </span><span class="annot"><span class="annottext">TVar (Seq CommandP1)
completedCommands :: TVar (Seq CommandP1)
completedCommands :: TVar (Seq CommandP1)
</span><a href="Shrun.Configuration.Env.Types.html#completedCommands"><span class="hs-identifier hs-var hs-var">completedCommands</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-166"></span><span>              </span><span class="annot"><span class="annottext">TBQueue (LogRegion r)
consoleLogQueue :: TBQueue (LogRegion r)
consoleLogQueue :: TBQueue (LogRegion r)
</span><a href="Shrun.Configuration.Env.Types.html#consoleLogQueue"><span class="hs-identifier hs-var hs-var">consoleLogQueue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-167"></span><span>              </span><span class="annot"><span class="annottext">commands :: NESeq CommandP1
</span><a href="Shrun.Configuration.Env.Types.html#commands"><span class="hs-identifier hs-var">commands</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MergedConfig
</span><a href="#local-6989586621679537742"><span class="hs-identifier hs-var">cfg</span></a></span><span> </span><span class="annot"><span class="annottext">MergedConfig
-&gt; Optic' A_Lens NoIx MergedConfig (NESeq CommandP1)
-&gt; NESeq CommandP1
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="file:///nix/store/kpg5cmxmxp7aaby0kpg2q9k29pn7k6ng-optics-core-0.4.1.1-doc/share/doc/optics-core-0.4.1.1/html/src/Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx MergedConfig (NESeq CommandP1)
</span><span class="">#commands</span></span><span>
</span><span id="line-168"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-169"></span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="annottext">Env r -&gt; m a
</span><a href="#local-6989586621679537743"><span class="hs-identifier hs-var">onEnv</span></a></span><span> </span><span class="annot"><span class="annottext">Env r
</span><a href="#local-6989586621679537752"><span class="hs-identifier hs-var">env</span></a></span><span>
</span><span id="line-171"></span><span>
</span><span id="line-172"></span><span id="local-6989586621679537380"><span class="annot"><a href="Shrun.Configuration.Env.html#getShrunXdgConfig"><span class="hs-identifier hs-type">getShrunXdgConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#MonadPathReader"><span class="hs-identifier hs-type">MonadPathReader</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679537380"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679537380"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">OsPath</span></span></span><span>
</span><span id="line-173"></span><span id="getShrunXdgConfig"><span class="annot"><span class="annottext">getShrunXdgConfig :: forall (m :: Type -&gt; Type).
(HasCallStack, MonadPathReader m) =&gt;
m OsPath
</span><a href="Shrun.Configuration.Env.html#getShrunXdgConfig"><span class="hs-identifier hs-var hs-var">getShrunXdgConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OsPath -&gt; m OsPath
forall (m :: Type -&gt; Type).
(HasCallStack, MonadPathReader m) =&gt;
OsPath -&gt; m OsPath
</span><a href="file:///home/tommy/.local/state/cabal/store/ghc-9.8.2/effects-fs-0.1-41974851db458d24d7ece8322c69e073da21672623bf03800b727feccee8eadf/share/doc/html/src/Effects.FileSystem.PathReader.html#getXdgConfig"><span class="hs-identifier hs-var">getXdgConfig</span></a></span><span> </span><span class="annot"><span class="">[osp|shrun|]</span></span><span>
</span><span id="line-174"></span></pre></body></html>